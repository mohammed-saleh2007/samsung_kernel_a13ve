name: Build Kernel CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: set permissions
      run: find . -exec sudo chmod +rwx  {} \;
    - name: install needed pkgs
      run: sudo apt-get update && sudo apt-get upgrade -y && sudo apt-get install git ccache automake lzop bison gperf build-essential zip curl zlib1g-dev zlib1g-dev:i386 g++-multilib python-networkx libxml2-utils bzip2 libbz2-dev libbz2-1.0 libghc-bzlib-dev squashfs-tools pngcrush schedtool dpkg-dev liblz4-tool make optipng -y
    - name: run building script 
      run: bash ./build_kernel.sh
    - name: list fils
      run: ls $(pwd)/arch/arm64/boot/
      
